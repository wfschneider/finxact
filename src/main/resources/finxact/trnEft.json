{
          "$schema": "http://json-schema.org/draft-04/schema#",
               "id": "http://finxact.com/product/schemas/trnEft.json",
            "title": "Transaction EFT",
      "description": "Financial transaction EFT detail (ISO8583)",
       "x-createDt": "06/09/2018",
       "x-createBy": "Frank R Sanchez",
       "x-updateDt": "07/03/2019",
       "x-updateBy": "Ken Rohlfing",
             "type": "object",
       "properties": {
              "msgType": {
                    "title": "Message Type",
              "description": "Eft network message type",
                     "type": "integer",
                  "minimum": 0,
                  "maximum": 9999
            },
           "acqNetCode": {
                    "title": "Acquiring network code",
              "description": "Network identification code of the acquiring network",
                     "type": "string",
                "maxLength": 3,
                  "choices": [
                                {
                             "$ref": "_choices/eftNetworks.choices"
                                }
                     ]
            },
          "procNetCode": {
                    "title": "Processing network code",
              "description": "Card issuer processor network identification code",
                     "type": "string",
                "maxLength": 3,
                  "choices": [
                                {
                             "$ref": "_choices/eftNetworks.choices"
                                }
                     ]
            },
            "acqInstId": {
                    "title": "Acquiring institution",
              "description": "Code identifying the acquiring institution or its agent",
                     "type": "integer",
                  "minimum": 0,
                "maxLength": 11
            },
         "acqInstCntry": {
                    "title": "Acquiring institution country code",
              "description": "Code identifying the acquiring institution country",
                     "type": "string",
                "maxLength": 3
            },
              "acqName": {
                    "title": "Acquirer name",
              "description": "Institution or merchant name of the transaction acquirer",
                     "type": "string",
                "maxLength": 30
            },
            "fwdInstId": {
                    "title": "Forwarding institution",
              "description": "Code identifying the forwarding institution or its agent",
                     "type": "integer",
                  "minimum": 0,
                "maxLength": 11
            },
         "fwdInstCntry": {
                    "title": "Forwarding institution country code",
              "description": "Code identifying the forwarding institution country",
                     "type": "string",
                "maxLength": 3
            },
         "merchantCode": {
                    "title": "Merchant code",
              "description": "The Standard Industrial Classification (SIC) code for the merchantâ€™s type of business or service",
                     "type": "integer",
                  "minimum": 0,
                  "maximum": 9999
            },
           "acceptorId": {
                    "title": "Card acceptor identification",
              "description": "Merchant number assigned by the acquirer",
                     "type": "string",
                "maxLength": 15
            },
           "terminalId": {
                    "title": "Card acceptor terminal identification",
              "description": "Unique code identifying a terminal at the card acceptor location",
                     "type": "string",
                "maxLength": 8
            },
             "threadId": {
                    "title": "Transaction thread reference",
              "description": "A unique trace, endToEndId, or other reference number generated by the transaction originator that may span multiple transactions or messages",
                     "type": ["string", "integer" ],
                "maxLength": 35
            },
             "acceptor": {
                    "title": "Card acceptor",
              "description": "The name and location of the card acceptor that defines the point of sale",
                     "type": "string",
                "maxLength": 40
            },
              "cardNbr": {
                    "title": "Payment card number",
              "description": "Primary account number (PAN) embossed on the card",
                     "type": "integer",
                  "minimum": 0,
                "maxLength": 20
            },
               "seqNbr": {
                    "title": "Card sequence number",
              "description": "Number that distinguishes separate cards having the same primary account number",
                     "type": "integer",
                  "minimum": 0,
                  "maximum": 99
            },
            "expireDtm": {
                    "title": "Card expiration date",
              "description": "The year and month that the card expires",
                     "type": "string",
                   "format": "date-time"
            },
                  "pin": {
                    "title": "Personal Identification Number",
              "description": "Personal Identification Number (PIN) - encrypted",
                     "type": "string",
                "maxLength": 16
            },
              "verCode": {
                    "title": "Verification code",
              "description": "Address and/or card verification data (AVS/CVC2/CVV)",
                     "type": "string",
                "maxLength": 4
            },
            "acctType1": {
                    "title": "Account type 1",
              "description": "Account type 1",
                     "type": "object",
                     "$ref": "#/definitions/acctType"
            },
            "acctType2": {
                    "title": "Account type 2",
              "description": "Account type 2",
                     "type": "object",
                     "$ref": "#/definitions/acctType"
            },
           "captureDtm": {
                    "title": "Capture date",
              "description": "The date the acquirer processed the transaction",
                     "type": "string",
                   "format": "date-time"
            },
              "xmitDtm": {
                    "title": "Transmission date",
              "description": "The datetime the acquiring network transmitted the message",
                     "type": "string",
                   "format": "date-time"
            },
            "settleDtm": {
                    "title": "Settlement date",
              "description": "The datetime the the transaction will be settled between the acquirer and issuer",
                     "type": "string",
                   "format": "date-time"
            },
              "trnType": {
                    "title": "EFT transaction type",
              "description": "EFT transaction type code",
                     "type": "integer",
                  "choices": [
                            [0, "Unknown" ]
                     ],
                  "minimum": 0,
                  "maximum": 99
            },
               "trnAmt": {
                    "title": "Transaction amount",
              "description": "Transaction amount, excluding trnFee",
                     "type": "number",
                   "format": "currency"
            },
               "trnFee": {
                    "title": "Transaction fee amount",
              "description": "Surcharge or general transaction fee charged for the transaction",
                     "type": "number",
                   "format": "currency"
            },
              "procFee": {
                    "title": "Processing fee amount",
              "description": "Fee for handling and routing the transaction",
                     "type": "number",
                   "format": "currency"
            },
              "ccyCode": {
                    "title": "Currency code",
              "description": "Transaction currency code for trnAmt, trnFee and procFee",
                     "type": "string",
                "maxLength": 3
            },
              "custAmt": {
                    "title": "Customer amount",
              "description": "Amount posted to the customer account in the currency of the account, excluding custFee",
                     "type": "number",
                   "format": "currency"
            },
              "custFee": {
                    "title": "Customer fee amount",
              "description": "Fee to be posted to the customer account in the currency of the account",
                     "type": "number",
                   "format": "currency"
            },
               "fxCust": {
                    "title": "Customer exchange",
              "description": "Customer exchange information if account currency code is not the transaction currency code",
                     "type": "object",
               "properties": {
                     "exchRate": {
                            "title": "Exchange rate",
                      "description": "Currency exchange rate",
                             "type": "number",
                           "format": "rate",
                          "minimum": 0,
                          "maximum": 100,
                       "multipleOf": 0.00001
                        },
                      "ccyCode": {
                            "title": "Currency code",
                      "description": "Account currency code",
                             "type": "string",
                        "maxLength": 3
                        },
                "x-dbInterface": {
                      "foreignKeys": [
                                        {
                                     "name": "ccyCode",
                               "foreignKey": ["ccyCode" ],
                          "referenceEntity": "ccyCode.json",
                             "referenceKey": ["ccyCode" ]
                                        }
                           ]
                        }
                  }
            },
             "fxSettle": {
                    "title": "Settlement exchange",
              "description": "Settlement exchange information",
                     "type": "object",
               "properties": {
                     "exchRate": {
                            "title": "Exchange rate",
                      "description": "Currency exchange rate",
                             "type": "number",
                           "format": "rate",
                          "minimum": 0,
                          "maximum": 100,
                       "multipleOf": 0.00001
                        },
                      "ccyCode": {
                            "title": "Currency code",
                      "description": "Settlement currency code",
                             "type": "string",
                        "maxLength": 3
                        },
                       "trnAmt": {
                            "title": "Settlement amount",
                      "description": "Amount to be transferred between the acquirer and the issuer in the currency of settlement",
                             "type": "number",
                           "format": "currency"
                        },
                       "trnFee": {
                            "title": "Transaction fee amount",
                      "description": "Transaction fee amount in the currency of settlement",
                             "type": "number",
                           "format": "currency"
                        },
                      "procFee": {
                            "title": "Processing fee amount",
                      "description": "Processing fee amount in the currency of settlement",
                             "type": "number",
                           "format": "currency"
                        },
                "x-dbInterface": {
                      "foreignKeys": [
                                        {
                                     "name": "ccyCode",
                               "foreignKey": ["ccyCode" ],
                          "referenceEntity": "ccyCode.json",
                             "referenceKey": ["ccyCode" ]
                                        }
                           ]
                        }
                  }
            },
             "panEntry": {
                    "title": "PAN entry code",
              "description": "Indicates how the primary account number (PAN) was entered into the system",
                     "type": "integer",
                  "choices": [
                                {
                             "$ref": "_choices/panEntryCodes.choices"
                                }
                     ],
                  "minimum": 0,
                  "maximum": 99
            },
             "pinEntry": {
                    "title": "PIN entry code",
              "description": "Indicates how and if the PIN was entered",
                     "type": "integer",
                  "choices": [
                                {
                             "$ref": "_choices/pinEntryCodes.choices"
                                }
                     ],
                  "minimum": 0,
                  "maximum": 9
            },
                "payee": {
                    "title": "Payee",
              "description": "The third party beneficiary in a payment transaction",
                     "type": "string",
                "maxLength": 30
            },
               "authId": {
                    "title": "Authorization identification",
              "description": "The processor assigned authorization request reference used to match messages throughout the lifecycle of a transaction",
                     "type": "string",
                "maxLength": 15
            },
             "authCode": {
                    "title": "Authorization code",
              "description": "Authorization response code assigned by the authorizing institution",
                     "type": ["string", "integer" ],
                "maxLength": 6
            },
           "authExpDtm": {
                    "title": "Authorization expiration",
              "description": "The date andtime that authorization expires",
                     "type": "string",
                   "format": "date-time"
            },
         "responseCode": {
                    "title": "Message response code",
              "description": "Code describing the response to a request message",
                     "type": "string",
                "maxLength": 2,
                  "choices": [
                            ["", "Unknown" ]
                     ]
            },
          "reasonCodes": {
                    "title": "Reason codes",
              "description": "Advice/Reversal reason codes",
                     "type": "object",
               "properties": {
                      "advice1": {
                            "title": "Advice code 1",
                      "description": "Advice reason code 1",
                             "type": "integer",
                          "minimum": 0,
                          "maximum": 9
                        },
                      "advice2": {
                            "title": "Advice code 2",
                      "description": "Advice reason code 2",
                             "type": "integer",
                          "minimum": 0,
                          "maximum": 9
                        },
                     "reverse1": {
                            "title": "Reverse code 1",
                      "description": "Reverse reason code 1",
                             "type": "integer",
                          "minimum": 0,
                          "maximum": 9
                        },
                     "reverse2": {
                            "title": "Reverse code 2",
                      "description": "Reverse reason code 2",
                             "type": "integer",
                          "minimum": 0,
                          "maximum": 9
                        }
                  }
            },
            "posStatus": {
                    "title": "POS status condition",
              "description": "Point of service (POS) condition",
                     "type": "object",
               "properties": {
                     "terminal": {
                            "title": "Terminal class",
                      "description": "Terminal class",
                             "type": "integer",
                          "minimum": 0,
                          "maximum": 999,
                          "choices": [
                                    [0, "Unknown" ]
                               ]
                        },
                     "customer": {
                            "title": "Customer status",
                      "description": "Customer present status",
                             "type": "integer",
                          "minimum": 0,
                          "maximum": 9,
                          "choices": [
                                    [0, "Unknown" ]
                               ]
                        },
                         "card": {
                            "title": "Card status",
                      "description": "Card present status",
                             "type": "integer",
                          "minimum": 0,
                          "maximum": 9,
                          "choices": [
                                    [0, "Unknown" ]
                               ]
                        },
                  "presentment": {
                            "title": "Presentment status",
                      "description": "Presentment status",
                             "type": "integer",
                          "minimum": 0,
                          "maximum": 9,
                          "choices": [
                                    [0, "Unknown" ]
                               ]
                        },
                     "security": {
                            "title": "Security status",
                      "description": "Security status",
                             "type": "integer",
                          "minimum": 0,
                          "maximum": 9,
                          "choices": [
                                    [0, "Unknown" ]
                               ]
                        },
                 "terminalType": {
                            "title": "Terminal type",
                      "description": "Terminal type",
                             "type": "integer",
                          "minimum": 0,
                          "maximum": 99,
                          "choices": [
                                    [0, "Unknown" ]
                               ]
                        }
                  }
            },
               "posGeo": {
                    "title": "POS geographic data",
              "description": "Point of service (POS) geographic data",
                     "type": "object",
               "properties": {
                       "street": {
                            "title": "Address street",
                      "description": "Street number, PO box or RD and street name",
                             "type": "string",
                           "format": "text-area"
                        },
                         "city": {
                            "title": "City",
                      "description": "City",
                             "type": "string"
                        },
                       "region": {
                            "title": "Region",
                      "description": "State, Province, County or Land",
                             "type": "string",
                        "maxLength": 2
                        },
                        "cntry": {
                            "title": "Country",
                      "description": "Address country",
                             "type": "string",
                        "maxLength": 3
                        },
                     "postCode": {
                            "title": "Postal code",
                      "description": "The address postal code",
                             "type": "string",
                        "maxLength": 9
                        }
                  }
            },
             "addStar2": {
                    "title": "Additional STAR network",
              "description": "Additional data STAR network (RAW data)",
                     "type": "string",
                "maxLength": 999
            },
                "token": {
                    "title": "Transaction Token",
              "description": "Unique External Vendor Transaction ID",
                     "type": "string"
            },
            "userToken": {
                    "title": "User Token",
              "description": "Unique external vendor ID of the user that owns the account",
                     "type": "string"
            },
        "businessToken": {
                    "title": "Business Token",
              "description": "Unique external vendor ID of business (bank)",
                     "type": "string"
            },
      "actingUserToken": {
                    "title": "Acting User Token",
              "description": "Acting external vendor ID of user. Can be parent account",
                     "type": "string"
            },
            "cardToken": {
                    "title": "Card Token",
              "description": "Unique external vendor ID of card tokenized.",
                     "type": "string"
            },
          "trnTypeDesc": {
                    "title": "Transaction Type",
              "description": "Institution or merchant name of the transaction acquirer",
                     "type": "string",
                  "choices": [
                                {
                             "$ref": "_choices/trnTypeDesc.choices"
                                }
                     ]
            },
                "state": {
                    "title": "State of Transaction",
              "description": "State or Status of Transaction",
                     "type": "string",
                "maxLength": 20,
                  "choices": [
                            ["PENDING", "Pending" ],
                            ["CLEARED", "Cleared" ],
                            ["COMPLETION", "Completion" ],
                            ["DECLINED", "Declined" ]
                     ]
            },
                  "dur": {
                    "title": "Duration of Transaction",
              "description": "Duration of transaction in external vendor in milliseconds",
                     "type": "integer"
            },
           "createdDtm": {
                    "title": "Created datetime",
              "description": "The datetime external vendor created the transaction",
                     "type": "string",
                   "format": "date-time"
            },
   "userTransactionDtm": {
                    "title": "User transaction datetime",
              "description": "The datetime the external vendor user created the transaction",
                     "type": "string",
                   "format": "date-time"
            },
                "rqAmt": {
                    "title": "Requested Amount",
              "description": "Used for settling transactions in external vendor",
                     "type": "number",
                   "format": "currency"
            },
             "apprCode": {
                    "title": "Approval Code",
              "description": "The approval code for the transaction in external vendor",
                     "type": "string"
            },
             "response": {
                    "title": "Response",
              "description": "Object containing the response code and memo from external vendor",
                     "type": "object",
               "properties": {
                         "code": {
                            "title": "Response Code",
                      "description": "Response Code",
                             "type": "string"
                        },
                         "memo": {
                            "title": "Response Memo",
                      "description": "Response Memo",
                             "type": "string"
                        }
                  }
            },
              "network": {
                    "title": "Transaction Network",
              "description": "Transaction Network",
                     "type": "string",
                  "choices": [
                                {
                             "$ref": "_choices/eftNetworks.choices"
                                }
                     ]
            },
           "subNetwork": {
                    "title": "Sub Network",
              "description": "Sub Network",
                     "type": "string",
                  "choices": [
                                {
                             "$ref": "_choices/eftNetworks.choices"
                                }
                     ]
            },
    "precedingTrnToken": {
                    "title": "Preceding Transaction Token",
              "description": "Preceding Transaction Token",
                     "type": "string"
            },
             "isProvCr": {
                    "title": "Is Provisional Credit",
              "description": "Is this chargeback in a provisional credit flow",
                     "type": "boolean"
            },
          "cashbackAmt": {
                    "title": "Cashback amount",
              "description": "Cashback amount",
                     "type": "number",
                   "format": "currency"
            }
      },
      "definitions": {
             "acctType": {
                    "title": "Acct Type",
              "description": "Acct Type",
                     "type": "object",
               "properties": {
                     "typeCode": {
                            "title": "Account type",
                      "description": "Account type code",
                             "type": "integer",
                          "choices": [
                                    [0, "Funding account" ],
                                    [1, "Savings account" ],
                                    [2, "Checking account" ],
                                    [3, "Credit account" ],
                                    [9, "Other account" ]
                               ],
                          "minimum": 0,
                          "maximum": 9
                        },
                       "seqNbr": {
                            "title": "Account sequence",
                      "description": "Account sequence number",
                             "type": "integer",
                          "choices": [
                                    [0, "Primary" ],
                                    [1, "Secondary" ],
                                    [2, "Tertiary" ]
                               ],
                          "minimum": 0,
                          "maximum": 2
                        }
                  }
            }
      },
    "x-dbInterface": {
              "indexes": [
                            {
                         "name": "token",
                     "indexKey": ["token" ],
                     "isUnique": true
                            }
                ],
          "foreignKeys": [
                            {
                         "name": "ccyCode",
                   "foreignKey": ["ccyCode" ],
              "referenceEntity": "ccyCode.json",
                 "referenceKey": ["ccyCode" ]
                            }
            ],
            "serialize": [
                            {
                         "name": "acctType1",
                       "format": "json"
                            },
                            {
                         "name": "acctType2",
                       "format": "json"
                            },
                            {
                         "name": "response",
                       "format": "json"
                            }
              ]
      }
}